# HTML

1. [Семантика](#1)
2. [Теги](#2)
3. [Подключаемые файлы](#3)

<a name="1"></a>

## Семантика

<a name="1.1"></a>

- [1.1](#1.1) Объединять блоки не по их визуальному расположению, а по их смыслу.

  Объединяем блоки вот так:  
  ![хороший пример](http://image.prntscr.com/image/665a3fda6b3847e687c4ed5fdbbaec22.png)

  А не вот так:  
  ![плохой пример](http://image.prntscr.com/image/ea6179004eb9493e90a4ceae4dad2a7c.png).  
  Как минимум, это очень легко позволит потом добавить новый элемент, когда надо будет по требованию заказчика сделать лист из 4 элементов, а не трех, как здесь. Плюс второй подход очень неудобен, если контент генерируется динамически. Так что если вы создаете верстку, которую потом будут прикручивать к бэкенду заказчики, и сделаете такую верстку, проклятия от их программистов и порча всей нашей кармы обеспечены.

<a name="1.2"></a>

- [1.2](#1.2) Если есть что-то похожее на список, проверяем, как будет выглядеть при большем количестве элементов.

  ![список](https://rizzoma.com/r/files/a87a0a28b84d6326d4f3909e8801dab7-97a135d68ad6e2e449e9c9f2dbf9766c-0-0.6276249218551724)

  Если непонятно, что будет при 4-х элементах, как в этом случае, обязательно спросить, а не принимать решение самостоятельно

<a name="1.3"></a>

- [1.3](#1.3) Все элементы с текстом, контент которых формируется динамически, проверяем на то, чтобы они не ломались при большем количестве текста, чем на макете.

  В имена подставляем знаменитое [Константин Константинопольский](https://tema.livejournal.com/1322108.html).  
  В идеале моменты, которые будет трудно масштабировать текстом, находить еще на стадии знакомства с макетом и задавать вопросы дизайнеру.

<a name="1.4"></a>

- [1.4](#1.4) Проверять страницы на наличие ошибок [W3C валидатором](https://validator.w3.org/#validate_by_uri). Если требуется прогонять страницы локально, воспользоваться [расширением для браузера](https://chrispederick.com/work/web-developer/). Предупреждения можно устранять по мере необходимости, исходя из условий проекта.

  Часто встречающиеся ошибки:

  <a name="1.4.1"></a>

  - [1.4.1](#1.4.1) Вставка блочных элементов внутрь инлайновых.

    Никаких `<span><div></div></span>`.

  <a name="1.4.2"></a>

  - [1.4.2](#1.4.2) Не предназначенные для расширения другими файлами через какой-нибудь шаблонизатор .html файлы страниц начинаются не с `<!DOCTYPE html>`, что противоречит HTML5 стандарту.

  <a name="1.4.3"></a>

  - [1.4.3](#1.4.3) Используются самозакрывающиеся теги, если они поддерживают другой режим.

    Нельзя:

    ```html
    <div />
    <span />
    ```

    Можно:

    ```html
    <link />
    <img />
    <input />
    ```

  <a name="1.4.4"></a>

  - [1.4.4](#1.4.4) Не все изображения `<img>` содержат `alt` атрибут.

  <a name="1.4.5"></a>

  - [1.4.5](#1.4.5) Есть вложенные формы `<form>`.

  Полный список потенциальных ошибок описан [тут](https://validator.w3.org/docs/errors.html).

<a name="1.5"></a>

- [1.5](#1.5) Использовать h1..h6 только для заголовков, причем h1 должен встречаться в одной странице всего один раз.

<a name="1.6"></a>

- [1.6](#1.6) Использовать `<table>` только для реальных таблиц.

  Если перед таблицей есть её текстовое описание, сделать это внутри тега `<table>` через `<caption>`.  
  Если у таблицы первая строка идет заголовком, то использовать `<thead>` и вложенные `<th>` для этого и использовать "scope" для этих ячеек.

  Пример:

  ```html
  <table>
    <caption>
      First two U.S. presidents
    </caption>
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Took office</th>
        <th scope="col">Party</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>George Washington</td>
        <td>April 30, 1789</td>
        <td>n/a</td>
      </tr>
      <tr>
        <td>John Adams</td>
        <td>March 4, 1797</td>
        <td>Federalist</td>
      </tr>
    </tbody>
  </table>
  ```

<a name="1.7"></a>

- [1.7](#1.7) Не использовать `<br>` нигде, кроме случаев, когда соблюдены все требования:

  - Newlines are semantically meaningful.
  - Indentation is not semantically meaningful (otherwise you should use a `<pre>`).
  - There exists no other semantically appropriate tag, like a paragraph or header tag.

<a name="1.8"></a>

- [1.8](#1.8) Использовать семантические теги.

  Почему их нужно использовать, узнать можно [здесь](https://www.youtube.com/watch?v=bDYEnNzprzE) и [здесь](https://developer.mozilla.org/ru/docs/Learn/%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D0%BE%D1%81%D1%82%D1%8C/HTML).  
  [Блок-схема](http://html5doctor.com/downloads/h5d-sectioning-flowchart.pdf) для выбора семантических тегов.

<a name="2"></a>

## Теги

<a name="2.1"></a>

- [2.1](#2.1) Все теги должны работать даже без CSS и JS.

  Все тексты, видимые сначала при открытии страницы так же должны быть доступны, формы должны сабмититься, ссылки должны переходить (а ссылки, по которым вообще не должно быть перехода и для которых принято ставить `href="#"`, вообще не использовать, это будет далее).

<a name="2.2"></a>

- [2.2](#2.2) Структура тегов в первую очередь должна идти от содержания, а не от дизайна

  ![пример](http://image.prntscr.com/image/a89c1aed00f14864851989caceacd59d.png) — например, такой элемент можно оформить как четыре идущих подряд элемента: иконка сообщений, бадж с цифрой 10, иконка аватара и имя пользователя. Но тут надо явно объединить с помощью `<div>` два блока, чтобы семантически они были отдельными — блок с информацией по сообщению и блок про пользователя. Для css потом, возможно, придется писать лишние стили, но верстка будет более осмысленной и не привязанной лишний раз к дизайну.

<a name="2.3"></a>

- [2.3](#2.3) Перед `<!DOCTYPE html>` не должно быть никаких символов, включая пробелы и переносы строк.

<a name="2.4"></a>

- [2.4](#2.4) Внутри `<head>` первым тегом должно идти `<meta charset="utf-8">`.

<a name="2.5"></a>

- [2.5](#2.5) У каждой страницы должны быть теги `title` и мета теги `keywords`, `description` (на содержимое спросить контент у менеджера).

<a name="2.6"></a>

- [2.6](#2.6) В `head` добавлять `<meta name="viewport" content="initial-scale=1.0, width=device-width">` — на мобильных браузерах можно избежать горизонтального скролла и масштабировать контент на всю ширину экрана.

<a name="2.7"></a>

- [2.7](#2.7) Все атрибуты должны быть внутри двойных кавычек

  Нельзя:

  ```html
  <img width=200 />
  <div class=block>
    <a href='/some/url'></a>
  </div>
  ```

  Можно:

  ```html
  <img width="200" />
  <div class="block">
    <a href="/some/url"></a>
  </div>
  ```

  Плюс, если в проекте нет других соглашений, атрибуты должны именоваться lower-case-hyphenated (имена только маленькими буквами и через дефис) и, если значение строковое и показывает какое-то имя, то тоже должно быть lower-case-hyphenated. Кастомные атрибуты стараться начинать с data- (это стандартная практика, рекомендованная для HTML5).

  Пример: `<a href="/" data-index="33" data-page-name="main-page">Home</a>`

<a name="2.8"></a>

- [2.8](#2.8) Не использовать id, кроме случаев, когда они семантически востребованы.

  Когда гарантируется их уникальность, например, на уровне базы данных и когда вам нужно:

  - сделать рабочую навигацию в рамках одной страницы (например, как на Википедии или на этом сайте сборника [best-practices](https://isobar-idev.github.io/code-standards/#javascript_javascript).
  - связать `<label>` и `<input />`, которые находятся в совершенно разных ветках дерева DOM (вообще, лучше всегда просто `<input />` внутрь `<label>` ставить, и тогда никакие айдишники не нужны).

<a name="2.9"></a>

- [2.9](#2.9) Все теги идут только с классами — никаких пустых `<div>`, `<section>` и т. д. Но можно для инлайновых элементов, если есть четкое понимание зачем. Это очень сильно мешает новым людям входить в проект и вам через некоторое время разобраться в собственной верстке.

<a name="2.10"></a>

- [2.10](#2.10) Избегать по максимуму инлайновые стили и обработчики событий в `html` (то есть никаких `<div onclick="func()">`).

<a name="2.11"></a>

- [2.11](#2.11) Не использовать ссылки с пустым или невалидным `href` (никаких `<a href="#">`) — тогда лучше использовать ссылку-заглушку на несуществующий урл, который явно говорит, что ссылка не проставлена.

  Если вы верстаете проект, в котором есть страницы, которых нет в дизайне (допустим, они потом при интеграции с сервером динамически создаваться будут), то лучше ставьте адрес, который явно говорит, что это ссылка-заглушка. Причем все ссылки-заглушки должны в рамках проекта иметь один адрес, например `<a href="/mock-address/change-me"></a>`.  
  Для SPA иногда приходится динамически js-ом генерить такие ссылки (как минимум в angular, там для этого даже отдельный атрибут ng-href), которые бы поддерживали динамическую генерацию на основе чистого клиентского раутинга.  
  Не надо никаких `<a href="#">` или `<a href="javascript:someFunc(1)">`. Плюс не надо сюда сохранять урлы до методов API на сервере, надеясь, что JS-ом вы сможете потом обработать клик, отправить ajax запрос на сервер по этому урлу и сами обработать ответ. Этого не произойдет, если юзер откроет ссылку в новой вкладке через контекстное меню или клик колесом мыши, например. Все урлы, указанные в `href`, должны открывать читаемый для человека контент, который целиком зависит только от сервера. [Оригинал последнего абзаца](https://isobar-idev.github.io/code-standards/#html_anchors_amp_links).

<a name="2.12"></a>

- [2.12](#2.12) Ссылки на чужие сайты должны содержать атрибут `target="_blank"`, чтобы открываться в новом окне.

<a name="2.13"></a>

- [2.13](#2.13) Все ссылки с `target="_blank"` должны так же содержать атрибут `rel="noopener noreferrer"`.

  Это связано с [уязвимостью](https://mathiasbynens.github.io/rel-noopener/), в соответствии с которой сайт, который вы открыли, получит доступ к сайту, с которого перешли через `window.opener`, причем это работает даже кроссдоменно.

<a name="2.14"></a>

- [2.14](#2.14) Все инпуты, селекты и другие интерактивные элементы форм должны располагаться внутри тега `<form>`.

  ```html
  <form>
    <label>
      First name:
      <input type="text" name="first-name" value="John" />
    </label>
    <label>
      Last name:
      <input type="text" name="last-name" value="Doe" />
    </label>
    <button type="submit">Submit</button>
  </form>
  ```

<a name="2.15"></a>

- [2.15](#2.15) Все интерактивные элементы, для которых дизайнером задуман нетривиальный порядок полей, должны иметь атрибут `tabindex`, плюс всегда кнопка сабмита в tabindex должна быть последней (соответственно, если есть визуально поля под кнопкой, у них должен быть tabindex и он должен быть меньше, чем у кнопки).

<a name="2.16"></a>

- [2.16](#2.16) Спрашивать у дизайнеров, какие элементы делать autofocus на какой странице.

<a name="2.17"></a>

- [2.17](#2.17) Если у поля есть четкое назначение, то использовать соответствующий тип (email, number, color и т. д.).

<a name="2.18"></a>

- [2.18](#2.18) Каждый тег, в котором может лежать текст, должен быть проверен на большое количество символов.

  Все заголовки и все теги с текстовыми описаниями.  
  Все инпуты проверять, чтобы при заполнении текст не прижимался вплотную к правой границе:  
  ![image](https://user-images.githubusercontent.com/12808495/55307777-c0e18e80-5482-11e9-927f-9c195d81555e.png)

<a name="2.19"></a>

- [2.19](#2.19) Классические инлайн теги должны быть только inline или inline-block, и в них не должно быть ничего, кроме простого текста и других таких же инлайновых тегов.

  Исключения: `<a>` — иногда ссылку надо сделать блочным элементом, но лучше использовать inline-block.

<a name="2.20"></a>

- [2.20](#2.20) Для телефонов, емайл-адресов и скайп никнеймов нужно использовать `<a>` c соответствующим адресом.

  ```html
  <a href="tel: +74951234567">+7 (495) 123-45-67</a>
  <a href="mailto: example@mail.ru">example@mail.ru</a>
  <a href="skype: someskype?call">someskype</a>
  ```

<a name="2.21"></a>

- [2.21](#2.21) Отображать примеры кода через тег `<code>`.

  Иногда на некоторых проектах нужно прямо на сайте показывать пользователям примеры кода (например, [здесь в туториале Реакта](https://reactjs.org/) целая куча примеров кода) — эти примеры должны быть написаны моноширинными шрифтами и отличаться от обычного текста — по умолчанию достаточно обрамить код в тeг `<code>`.

<a name="3"></a>

## Подключаемые файлы

<a name="3.1"></a>

- [3.1](#3.1) Все картинки, шрифты и т. д. должны иметь уникальное название в рамках проекта и не содержать кириллических символов. Если в проекте нет индивидуальных соглашений, то они должны именоваться в стиле lower-case-hyphenated.

<a name="3.2"></a>

- [3.2](#3.2) В проекте обязательно должен быть favicon.ico, подключаемый на всех страницах.

  Как это сделать, используя webpack, очень хорошо написано в [этой статье](https://medium.com/tech-angels-publications/bundle-your-favicons-with-webpack-b69d834b2f53).

<a name="3.3"></a>

- [3.3](#3.3) В сафари своя версия favicon, ее тоже обязательно надо настраивать.

  То есть нужна svg для контура иконки, и нужен цвет для иконки при наведении. [Статья](https://yoast.com/dev-blog/safari-pinned-tab-icon-mask-icon/).

<a name="3.4"></a>

- [3.4](#3.4) Прогонять картинки через [kraken.io](https://kraken.io/) или использовать свои CLI-утилиты для этого.

<a name="3.5"></a>

- [3.5](#3.5) Все фотографии и картинки, где нет прозрачности, делать в jpg.

<a name="3.6"></a>

- [3.6](#3.6) При нарезке картинок из фотошопа поставить DPI равным 72dpi, а саму картинку сохранить через "Save for Web".

<a name="3.7"></a>

- [3.7](#3.7) Максимальная ширина картинки — 1920 пикселей. Если в макетах она больше, пропорционально ужимайте.

  На самом деле, это правило спорно (как минимум для ретина дисплеев я не уверен), но следуйте ему, пока дизайнер не скажет другого.
